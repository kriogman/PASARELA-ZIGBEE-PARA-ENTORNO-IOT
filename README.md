# Zigbee Gateway for IoT Environment

![Alt text](images/architecture.jpeg?raw=true "Title")

This project proposes the design of an architecture to create a Zigbee gateway for an IoT environment. The proposed design is intended to be flexible and to be able to adapt the infrastructure to meet specific requirements for a home automation network.

The project is based on the Zigbee wireless protocol to create a network of sensors and actuators. This protocol is based on the IEEE 802.15.4 standard developed to create battery-operated devices that require low power consumption. In addition to Zigbee, different types of technologies and tools are used that are widely used today for the development of projects related to smart devices.

We maintain the development framework of this project in the context of a network of sensors and actuators that use Zigbee as a communication protocol. For this network, we need to obtain and process the reading data from these sensors and the commands sent to the actuator devices. The objective of this project is the design and development of an architecture with a gateway for a Zigbee network. The architecture allows this network to be accessible through the Internet and different dashboards are developed for the monitoring and control of the home automation network.

Relying on different communication protocols, hardware and software, we create an IoT environment where we are able to define and control the logic of the operation and interaction of the different IoT devices.

To achieve the objectives of this work, various technologies and tools were used, both hardware and software. The idea was to simulate basic functions of a Smart Home and achieve remote and secure access to these functions to show the approach of this project.

Part of the proposed architecture consists of the deployment of a network of wireless sensors and actuators (WSAN) which are battery-operated and use Zigbee as the communication protocol. This network is made up of a humidity sensor, a contact sensor, a motion sensor, a light bulb and a switch. These are all end devices and it was not necessary to introduce any router devices into the Zigbee network. For the network coordinator we use a CC2531 USB dongle connected to a Raspberry Pi. This USB device was flashed with the ZigBee HA standard coordinator firmware and was used as the coordinator of the proposed Zigbee network.

Another software we used was Zigbee2MQTT. This was the solution to be able to work with the zigbee data from the network through an application and to link everything to some cloud service to get remote access. Zigbee2MQTT acts as a bridge between Zigbee messages and MQTT messages. MQTT is an extremely lightweight publish-subscribe protocol that carries messages between devices and generally runs over a TCP/IP stack protocol. It is designed for connections to remote locations and is widely used in IoT. Zigbee2MQTT needs to connect as a client to an MQTT broker to send and receive messages. For this, we use Mosquitto, which is an open source MQTT message broker and it can handle all MQTT messages from clients that are connected to it.

As a cloud service provider we use AWS and 3 key services were used: IoT Core, IAM and EC2. La forma en que conectamos la parte local de la arquitectura con AWS fue a través de un puente configurado entre Mosquitto y AWS IoT Core. Obviously, the application and the logic for the treatment of the devices through MQTT messages, it was necessary that they were deployed in a cloud service. For this we used Node-RED on a EC2 instance. Node-RED was the solution used to manage MQTT messages, to create the behavior flows of all the devices in the home automation network, and to create the monitoring and interaction dashboards for the Smart Home users. It is one of the most used tools in the development of IoT environments and is based on the development of flows to connect hardware devices, APIs and online services.

The development of this work has allowed me to enter and get to know a little of a field that has caught my attention for a while and that I had not had the opportunity to work on. The Internet of Things is very interesting, it offers many opportunities for development and creation and it is a market that grows every day.

As future work in this project, and having more learning time with Node-RED, not only we could improves and create more functionalities in the logic of the home automation network, but it would be interesting the possibility of exploring the integration of other wireless protocols such as those mentioned in previous chapters. This further opens the spectrum of devices from different manufacturers that could be used for certain functions within the architecture that has been proposed, which would increase its flexibility to be used to solve requirements in more scenarios.

Another line that would be important to work on is regarding the part of architecture in the cloud environment. AWS provides tons of options to vary the work we have done. Although what we learned about AWS is quite useful and helped us to achieve the objectives of this project, it is feasible to think of solutions that would be given to a system that consumes many more resources, is larger and needs an infrastructure in high availability.

All this information has helped me to grow more professionally and has opened up a little more the spectrum of work to which I would like to dedicate my time. An interesting conclusion that I have experienced is that the more “things” in our environment we are able to safely monitor and control, the more advantages we will have on a day-to-day basis.
